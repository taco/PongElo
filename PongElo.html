<head>
  <title>ladder</title>
</head>

<body>
  {{> hello}}
  {{> matches}}
  {{> rankings}}
  
</body>

<template name="hello">
  <h1><span>Pong</span> @ Volusion</h1>
  {{greeting}}
</template>

<template name="rankings">
    <div class="rankings">
        <h2>Ladder</h2>
        <ol class="ladder">
            <ul class="inline thead">
                <li class="player">
                    <span>Player</span>
                </li><li class="rating">
                    <span>Rating</span>
                </li>
            </ul>
            {{#each players}}
                <li><ul class="inline tr">
                    <li class="player">
                        <span>{{name}}</span>
                    </li><li class="rating">
                        <span>{{formatScore score}}</span>
                    </li>
                </ul></li>
            {{/each}}
        </ol>
        <p>Not on the list? Enter your name below</p>
        <div class="player-form">
            <input type="text" placeholder="name" />
            <button id="addPlayer">add me!</button>
        </div>
    </div>
</template>

<template name="matches">
    <div class="matches">
        <h2>Report</h2>
        <fieldset class="winners">
            <legend>Winners</legend>
            <select id="winner">
                {{> players}}    
            </select><select id="winner2">
                {{> players}}    
            </select>
        </fieldset><fieldset class="losers">
            <legend>Losers</legend>
            <select id="loser">
                {{> players}}    
            </select><select id="loser2">
                {{> players}}    
            </select>
        </fieldset>
        <button id="addMatch">Submit Results</button>
            <ul>
                {{#each matches}}
                    {{#if winner2}}
                        <li>
                            <table><tbody>
                                <tr><td>{{winner}}<br />{{winner2}}</td></tr>
                                <tr><td>{{formatScore wOldScore}}<br />{{formatScore wNewScore}}</td></tr>
                                <tr><td>{{formatScore wOldScore2}}<br />{{formatScore wNewScore2}}</td></tr>
                            </tbody></table>
                            <div>{{formatPercent wChance}} - {{formatPercent lChance}}</div>
                            <table><tbody>
                                <tr><td>{{loser}}<br />{{loser2}}</td></tr>
                                <tr><td>{{formatScore lOldScore}}<br />{{formatScore lNewScore}}</td></tr>
                                <tr><td>{{formatScore lOldScore2}}<br />{{formatScore lNewScore2}}</td></tr>
                            </tbody></table>
                        </li>
                    {{else}}
                        <table class="results">
                        <thead>
                            <tr>
                                <th colspan="3">Victory</th>
                                <th colspan="3">Defeat</th>
                            </tr><tr>
                                <th class="player">Player</th>
                                <th class="rating">Old</th>
                                <th class="rating">New</th>
                                <th class="player">Player</th>
                                <th class="rating">Old</th>
                                <th class="rating">New</th>
                            </tr>
                        </thead><tbody>
                        <tr class="singles">
                            <td class="player">{{winner}}</td>
                            <td class="rating">{{formatScore wOldScore}}</td>
                            <!-- <td>{{formatPercent wChance}}</td> -->
                            <td class="rating">{{formatScore wNewScore}}</td>
                            <td class="player">{{loser}}</td>
                            <td class="rating">{{formatScore lOldScore}}</td>
                            <!-- <td>{{formatPercent lChance}}</td> -->
                            <td class="rating">{{formatScore lNewScore}}</td>
                        </tr>
                        </tbody></table>
                    {{/if}}
                {{/each}}
            </ul>
    </div>
</template>

<template name="players">
    <option></option>
    {{#each players}}
        <option value="{{name}}">{{name}} - {{formatScore score}}</option>
    {{/each}}
</template>
